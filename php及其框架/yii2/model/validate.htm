<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>validate以及场景</title>
<meta name="GENERATOR" content="WinCHM">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style>
html,body { 
	/* Default Font */
	font-family: Arial, Helvetica, sans-serif;
	font-size: 11pt;
}
p{
margin:0
}
</style>

</head>

<body>
<H2><FONT color=#008000>验证规则定义</FONT></H2>
<P>在model中包含rules方法</P><PRE style="FONT-SIZE: 11.3pt; FONT-FAMILY: 'Fira Code'; COLOR: #a9b7c6; BACKGROUND-COLOR: #2b2b2b"><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">public function </SPAN><SPAN style="COLOR: #ffc66d; BACKGROUND-COLOR: #232525">rules</SPAN><SPAN style="BACKGROUND-COLOR: #232525">()<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">{<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">    </SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">return </SPAN><SPAN style="BACKGROUND-COLOR: #232525">[<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">        [[</SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'collection_id'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'collection_handle'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'collection_title'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'products'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">,</SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'type'</SPAN><SPAN style="BACKGROUND-COLOR: #232525">]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'required'</SPAN><SPAN style="BACKGROUND-COLOR: #232525">]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">,<BR></SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">        </SPAN><SPAN style="BACKGROUND-COLOR: #232525">[[</SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'created_at'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'updated_at'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">,</SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'begin_at'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">,</SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'uv_last_time'</SPAN><SPAN style="BACKGROUND-COLOR: #232525">]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'safe'</SPAN><SPAN style="BACKGROUND-COLOR: #232525">]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">,<BR></SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">        </SPAN><SPAN style="BACKGROUND-COLOR: #232525">[[</SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'adp'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'type'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'device'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'uv'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'status'</SPAN><SPAN style="BACKGROUND-COLOR: #232525">]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'integer'</SPAN><SPAN style="BACKGROUND-COLOR: #232525">]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">,<BR></SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">        </SPAN><SPAN style="BACKGROUND-COLOR: #232525">[[</SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'rules'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'products'</SPAN><SPAN style="BACKGROUND-COLOR: #232525">]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'string'</SPAN><SPAN style="BACKGROUND-COLOR: #232525">]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">,<BR></SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">        </SPAN><SPAN style="BACKGROUND-COLOR: #232525">[[</SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'title'</SPAN><SPAN style="BACKGROUND-COLOR: #232525">]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'string'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'max' </SPAN><SPAN style="BACKGROUND-COLOR: #232525">=&gt; </SPAN><SPAN style="COLOR: #6897bb; BACKGROUND-COLOR: #232525">150</SPAN><SPAN style="BACKGROUND-COLOR: #232525">]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">,<BR></SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">        </SPAN><SPAN style="BACKGROUND-COLOR: #232525">[</SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'type'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'in'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'range' </SPAN><SPAN style="BACKGROUND-COLOR: #232525">=&gt; [</SPAN><SPAN style="COLOR: #6897bb; BACKGROUND-COLOR: #232525">1</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">,</SPAN><SPAN style="COLOR: #6897bb; BACKGROUND-COLOR: #232525">2</SPAN><SPAN style="BACKGROUND-COLOR: #232525">]]<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">    ]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">;<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">}</SPAN></PRE>
<H2><FONT color=#008000>验证调用</FONT></H2><PRE style="FONT-SIZE: 11.3pt; FONT-FAMILY: 'Fira Code'; COLOR: #a9b7c6; BACKGROUND-COLOR: #2b2b2b"><SPAN style="BACKGROUND-COLOR: #232525">    <BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">    <BR></SPAN><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525">//</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">方式一 对象属性逐一赋值  先赋值再验证<BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">    </SPAN><SPAN style="COLOR: #9876aa; BACKGROUND-COLOR: #232525">$obj </SPAN><SPAN style="BACKGROUND-COLOR: #232525">= </SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">new </SPAN><SPAN style="BACKGROUND-COLOR: #232525">Model()</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">;<BR></SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">    </SPAN><SPAN style="COLOR: #9876aa; BACKGROUND-COLOR: #232525">$obj</SPAN><SPAN style="BACKGROUND-COLOR: #232525">-&gt;</SPAN><SPAN style="COLOR: #9876aa; BACKGROUND-COLOR: #232525">name </SPAN><SPAN style="BACKGROUND-COLOR: #232525">= </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">"</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #6a8759; BACKGROUND-COLOR: #232525">张三</SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">"</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">;<BR></SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">    </SPAN><SPAN style="COLOR: #9876aa; BACKGROUND-COLOR: #232525">$obj</SPAN><SPAN style="BACKGROUND-COLOR: #232525">-&gt;</SPAN><SPAN style="COLOR: #9876aa; BACKGROUND-COLOR: #232525">age </SPAN><SPAN style="BACKGROUND-COLOR: #232525">= </SPAN><SPAN style="COLOR: #6897bb; BACKGROUND-COLOR: #232525">12</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">;<BR></SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">    if</SPAN><SPAN style="BACKGROUND-COLOR: #232525">(!</SPAN><SPAN style="COLOR: #9876aa; BACKGROUND-COLOR: #232525">$obj</SPAN><SPAN style="BACKGROUND-COLOR: #232525">-&gt;</SPAN><SPAN style="COLOR: #ffc66d; BACKGROUND-COLOR: #232525">validate</SPAN><SPAN style="BACKGROUND-COLOR: #232525">()){<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">        var_dump(</SPAN><SPAN style="COLOR: #9876aa; BACKGROUND-COLOR: #232525">$obj</SPAN><SPAN style="BACKGROUND-COLOR: #232525">-&gt;</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">errors</SPAN><SPAN style="BACKGROUND-COLOR: #232525">)</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">;</SPAN><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525">//errors</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">是二维数组<BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">    </SPAN><SPAN style="BACKGROUND-COLOR: #232525">}<BR></SPAN><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525">//</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">方式二  块赋值       先赋值再验证   只会赋值安全属性(即部分属性。比如场景限定的只需要某些属性)<BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">    </SPAN><SPAN style="COLOR: #9876aa; BACKGROUND-COLOR: #232525">$obj </SPAN><SPAN style="BACKGROUND-COLOR: #232525">= </SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">new </SPAN><SPAN style="BACKGROUND-COLOR: #232525">Model()</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">;<BR></SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">    </SPAN><SPAN style="COLOR: #9876aa; BACKGROUND-COLOR: #232525">$obj</SPAN><SPAN style="BACKGROUND-COLOR: #232525">-&gt;</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">attributes </SPAN><SPAN style="BACKGROUND-COLOR: #232525">= [</SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'name' </SPAN><SPAN style="BACKGROUND-COLOR: #232525">=&gt; </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #6a8759; BACKGROUND-COLOR: #232525">张三</SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'age' </SPAN><SPAN style="BACKGROUND-COLOR: #232525">=&gt; </SPAN><SPAN style="COLOR: #6897bb; BACKGROUND-COLOR: #232525">12</SPAN><SPAN style="BACKGROUND-COLOR: #232525">]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">;<BR></SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">    if</SPAN><SPAN style="BACKGROUND-COLOR: #232525">(!</SPAN><SPAN style="COLOR: #9876aa; BACKGROUND-COLOR: #232525">$obj</SPAN><SPAN style="BACKGROUND-COLOR: #232525">-&gt;</SPAN><SPAN style="COLOR: #ffc66d; BACKGROUND-COLOR: #232525">validate</SPAN><SPAN style="BACKGROUND-COLOR: #232525">()){<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">        var_dump(</SPAN><SPAN style="COLOR: #9876aa; BACKGROUND-COLOR: #232525">$obj</SPAN><SPAN style="BACKGROUND-COLOR: #232525">-&gt;</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">errors</SPAN><SPAN style="BACKGROUND-COLOR: #232525">)</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">;</SPAN><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525">//errors</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">是二维数组<BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">    </SPAN><SPAN style="BACKGROUND-COLOR: #232525">}<BR></SPAN><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525">//</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">方式三  错误的写法  没有赋值直接验证<BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">    </SPAN><SPAN style="COLOR: #9876aa; BACKGROUND-COLOR: #232525">$data </SPAN><SPAN style="BACKGROUND-COLOR: #232525">= [</SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'name' </SPAN><SPAN style="BACKGROUND-COLOR: #232525">=&gt; </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #6a8759; BACKGROUND-COLOR: #232525">张三</SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'age' </SPAN><SPAN style="BACKGROUND-COLOR: #232525">=&gt; </SPAN><SPAN style="COLOR: #6897bb; BACKGROUND-COLOR: #232525">12</SPAN><SPAN style="BACKGROUND-COLOR: #232525">]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">;<BR></SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">    </SPAN><SPAN style="COLOR: #9876aa; BACKGROUND-COLOR: #232525">$obj </SPAN><SPAN style="BACKGROUND-COLOR: #232525">= </SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">new </SPAN><SPAN style="BACKGROUND-COLOR: #232525">Model()</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">;<BR></SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">    if</SPAN><SPAN style="BACKGROUND-COLOR: #232525">(!</SPAN><SPAN style="COLOR: #9876aa; BACKGROUND-COLOR: #232525">$obj</SPAN><SPAN style="BACKGROUND-COLOR: #232525">-&gt;</SPAN><SPAN style="COLOR: #ffc66d; BACKGROUND-COLOR: #232525">validate</SPAN><SPAN style="BACKGROUND-COLOR: #232525">(</SPAN><SPAN style="COLOR: #9876aa; BACKGROUND-COLOR: #232525">$data</SPAN><SPAN style="BACKGROUND-COLOR: #232525">)){<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">        var_dump(</SPAN><SPAN style="COLOR: #9876aa; BACKGROUND-COLOR: #232525">$obj</SPAN><SPAN style="BACKGROUND-COLOR: #232525">-&gt;</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">errors</SPAN><SPAN style="BACKGROUND-COLOR: #232525">)</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">;</SPAN><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525">//errors</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">是二维数组<BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">    </SPAN><SPAN style="BACKGROUND-COLOR: #232525">}<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">    </SPAN><SPAN style="COLOR: #9876aa; BACKGROUND-COLOR: #232525">$obj</SPAN><SPAN style="BACKGROUND-COLOR: #232525">-&gt;</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">attributes </SPAN><SPAN style="BACKGROUND-COLOR: #232525">= </SPAN><SPAN style="COLOR: #9876aa; BACKGROUND-COLOR: #232525">$data</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">;<BR></SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525"><BR></SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525"><BR></SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">  </SPAN></PRE>
<P>&nbsp;</P>
<H2><FONT color=#008000>场景定义</FONT></H2>
<P>两种定义方式</P><PRE style="FONT-SIZE: 11.3pt; FONT-FAMILY: 'Fira Code'; COLOR: #a9b7c6; BACKGROUND-COLOR: #2b2b2b"><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">public function </SPAN><SPAN style="COLOR: #ffc66d; BACKGROUND-COLOR: #232525">scenarios</SPAN><SPAN style="BACKGROUND-COLOR: #232525">()<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">{<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">    </SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">return </SPAN><SPAN style="BACKGROUND-COLOR: #232525">[<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">        </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'login' </SPAN><SPAN style="BACKGROUND-COLOR: #232525">=&gt; [</SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'username'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'password'</SPAN><SPAN style="BACKGROUND-COLOR: #232525">]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">,<BR></SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">        </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'register' </SPAN><SPAN style="BACKGROUND-COLOR: #232525">=&gt; [</SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'username'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'email'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'password'</SPAN><SPAN style="BACKGROUND-COLOR: #232525">]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">,<BR></SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">    </SPAN><SPAN style="BACKGROUND-COLOR: #232525">]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">;<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">}</SPAN></PRE>
<P>或者</P><PRE style="FONT-SIZE: 11.3pt; FONT-FAMILY: 'Fira Code'; COLOR: #a9b7c6; BACKGROUND-COLOR: #2b2b2b"><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">public function </SPAN><SPAN style="BACKGROUND-COLOR: #232525">rules()<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">{<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">    </SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">return </SPAN><SPAN style="BACKGROUND-COLOR: #232525">[<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">        [[</SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'username'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'email'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'password'</SPAN><SPAN style="BACKGROUND-COLOR: #232525">]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'required'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'on' </SPAN><SPAN style="BACKGROUND-COLOR: #232525">=&gt; </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'register'</SPAN><SPAN style="BACKGROUND-COLOR: #232525">]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">,</SPAN><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525">// </SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">在</SPAN><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525">"register" </SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">场景下</SPAN><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525"> username, email </SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">和</SPAN><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525"> password </SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">必须有值<BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">        </SPAN><SPAN style="BACKGROUND-COLOR: #232525">[[</SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'username'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'password'</SPAN><SPAN style="BACKGROUND-COLOR: #232525">]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'required'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'on' </SPAN><SPAN style="BACKGROUND-COLOR: #232525">=&gt; </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'login'</SPAN><SPAN style="BACKGROUND-COLOR: #232525">]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">,</SPAN><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525">// </SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">在</SPAN><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525"> "login" </SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">场景下</SPAN><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525"> username </SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">和</SPAN><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525"> password </SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">必须有值<BR></SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">    </SPAN><SPAN style="BACKGROUND-COLOR: #232525">]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">;<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">}</SPAN></PRE>
<H2><FONT color=#008000>场景调用</FONT></H2><PRE style="FONT-SIZE: 11.3pt; FONT-FAMILY: 'Fira Code'; COLOR: #a9b7c6; BACKGROUND-COLOR: #2b2b2b"><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525">// </SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">场景作为属性来设置<BR></SPAN><SPAN style="COLOR: #9876aa; BACKGROUND-COLOR: #232525">$model </SPAN><SPAN style="BACKGROUND-COLOR: #232525">= </SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">new </SPAN><SPAN style="BACKGROUND-COLOR: #232525">User</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">;<BR></SPAN><SPAN style="COLOR: #9876aa; BACKGROUND-COLOR: #232525">$model</SPAN><SPAN style="BACKGROUND-COLOR: #232525">-&gt;scenario = </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'login'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">;</SPAN></PRE><PRE style="FONT-SIZE: 11.3pt; FONT-FAMILY: 'Fira Code'; COLOR: #a9b7c6; BACKGROUND-COLOR: #2b2b2b"><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525"><BR></SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525"><BR></SPAN><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525">// </SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">场景通过构造初始化配置来设置<BR></SPAN><SPAN style="COLOR: #9876aa; BACKGROUND-COLOR: #232525">$model </SPAN><SPAN style="BACKGROUND-COLOR: #232525">= </SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">new </SPAN><SPAN style="BACKGROUND-COLOR: #232525">User([</SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'scenario' </SPAN><SPAN style="BACKGROUND-COLOR: #232525">=&gt; </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'login'</SPAN><SPAN style="BACKGROUND-COLOR: #232525">])</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">;</SPAN></PRE>
<H2><FONT color=#008000>特殊</FONT></H2>
<P><FONT color=#ff0000>非安全属性 !属性</FONT></P><PRE style="FONT-SIZE: 11.3pt; FONT-FAMILY: 'Fira Code'; COLOR: #a9b7c6; BACKGROUND-COLOR: #2b2b2b"><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">public function </SPAN><SPAN style="COLOR: #ffc66d; BACKGROUND-COLOR: #232525">rules</SPAN><SPAN style="BACKGROUND-COLOR: #232525">()<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">{<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">    </SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">return </SPAN><SPAN style="BACKGROUND-COLOR: #232525">[<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">        [[</SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'username'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'password'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'!secret'</SPAN><SPAN style="BACKGROUND-COLOR: #232525">]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'required'</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">, </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'on' </SPAN><SPAN style="BACKGROUND-COLOR: #232525">=&gt; </SPAN><SPAN style="COLOR: #6a8759; BACKGROUND-COLOR: #232525">'login'</SPAN><SPAN style="BACKGROUND-COLOR: #232525">]<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">    ]</SPAN><SPAN style="COLOR: #cc7832; BACKGROUND-COLOR: #232525">;<BR></SPAN><SPAN style="BACKGROUND-COLOR: #232525">}<BR></SPAN><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525">//</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">当模型在</SPAN><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525"> login </SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">场景下，三个属性都会被验证， 但只有</SPAN><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525"> username</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">和</SPAN><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525"> password </SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">属性会被块赋值， 要对</SPAN><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525">secret</SPAN><SPAN style="FONT-FAMILY: 'Arial'; COLOR: #808080; BACKGROUND-COLOR: #232525">属性赋值，必须像如下例子明确对它赋值。<BR></SPAN><SPAN style="COLOR: #808080; BACKGROUND-COLOR: #232525">//$model-&gt;secret = $secret;</SPAN></PRE>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P>
<P>&nbsp;</P></body>
</html>
